{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'names.css' %}">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!--<input id="p1" type="text">
    <input id="p2" type="text">
    <input id="p3" type="text">
    <input id="p4" type="text">
    <input id="p5" type="text">
    <input id="p6" type="text">
    <input id="p7" type="text">
    <input id="p8" type="text">
    <input id="p9" type="text">
    <input id="p10" type="text">
    <input id="p11" type="text">-->
    <div class="main-container">
        <nav>
            <div class="content">
                <h2>LOGO</h2>
                <a href="{% url 'home' %}"><i class="fa fa-home" style="font-size:24px"></i></a>
        </nav>


        <div class="content2" >
            <div class="sub-content">
                <div class="att">
                    {% for i in l.0%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}
                </div>
                <div class="mid-a">
                    {% for i in l.1%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}

                </div>
                <div class="mid-m">
                    {% for i in l.2%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}
                    <!--<div id=p6><h4 class="hold2" style="position: absolute;">coman</h4></div>
                    <div id="p11"><h4 class="hold3" style="position: absolute;">muller</h4></div>
                    <div id="p8"><h4 class="hold4" style="position: absolute;">gnabry</h4></div>-->
                
                </div>
                <div class="mid-d">
                    {% for i in l.3%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}
                    
                </div>
                <div class="def">
                    {% for i in l.4%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}
                    
                </div>
                <div class="gk">
                    {% for i in l.5%}
                    <div><input id="{{i}}" type="text"></div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="content3">
            <div class="sub-content3">
                <!--<div><input type="text" placeholder="Squad name" id="sname"></div>-->
                <div><button type="submit" id="save-b" data-test="test"  data-action="save"> Continue </button></div>
                <!--<div><button type="submit" id="re-b" data-test="test"  data-action="rearrange"> Rearrange </button></div>-->
            </div>
             
        </div>
        
        
    </div>
    
    
</body>
</html>
<script>
    k = document.getElementById('p1')
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    btn = document.getElementById('save-b')
    var csrftoken = getCookie('csrftoken');

    btn.addEventListener("click",function(){
        a=document.getElementById('p1')
        b=document.getElementById('p2')
        c=document.getElementById('p3')
        d=document.getElementById('p4')
        e=document.getElementById('p5')
        f = document.getElementById('p6')
        g = document.getElementById('p7')
        h = document.getElementById('p8')
        i = document.getElementById('p9')
        j = document.getElementById('p10')
        k = document.getElementById('p11')
        saveCordinates(a.value,b.value,c.value,d.value,
        e.value,f.value,g.value,h.value,i.value,
        j.value,k.value)
    })
    function saveCordinates(t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11){
        console.log("sending data to user's savelist")
        var url = 
        '/save_names/'

		fetch(url, {
			method:'POST',
			headers:{
				'Content-Type':'application/json',
				'X-CSRFToken':csrftoken,
			}, 
            body:JSON.stringify({"t1":t1,"t2":t2,"t3":t3,"t4":t4,"t5":t5,"t6":t6,"t7":t7,"t8":t8,
            "t9":t9,"t10":t10,"t11":t11})
        })
        
		.then((response) => {
		   return response.json();
		})
		.then((data) => {
            console.log("data :",data)
            location.href="https://m-squads12.herokuapp.com/display_squad"
            //location.href="http://127.0.0.1:8000/display_squad"
		});
    }

</script>